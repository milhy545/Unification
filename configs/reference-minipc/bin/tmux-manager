#!/bin/bash

# Check if tmux is running
if tmux list-sessions &>/dev/null; then
    echo "ğŸ“º ExistujÃ­cÃ­ tmux sessions:"
    tmux list-sessions
    echo
    echo "1) PÅ™ipojit k existujÃ­cÃ­ session"
    echo "2) VytvoÅ™it novou session"
    echo "3) PokraÄovat bez tmux"
    echo
    read -p "Volba (1-3): " choice
    
    case $choice in
        1)
            if [ $(tmux list-sessions 2>/dev/null | wc -l) -eq 1 ]; then
                # Pouze jedna session, pÅ™ipoj se k nÃ­
                SESSION=$(tmux list-sessions -F '#S' | head -1)
                tmux attach-session -t "$SESSION"
            else
                # VÃ­ce sessions, nech uÅ¾ivatele vybrat
                echo "DostupnÃ© sessions:"
                tmux list-sessions -F '#S: #{session_windows} windows'
                echo
                read -p "NÃ¡zev session: " session_name
                tmux attach-session -t "$session_name" 2>/dev/null || echo "Session '$session_name' neexistuje"
            fi
            ;;
        2)
            read -p "NÃ¡zev novÃ© session: " new_session
            tmux new-session -s "${new_session:-default}"
            ;;
        3)
            echo "PokraÄuji bez tmux..."
            ;;
        *)
            echo "NeplatnÃ¡ volba, pokraÄuji bez tmux..."
            ;;
    esac
else
    echo "ğŸ†• Å½Ã¡dnÃ© tmux sessions nebÄ›Å¾Ã­"
    echo "1) VytvoÅ™it novou session"
    echo "2) PokraÄovat bez tmux"
    echo
    read -p "Volba (1-2): " choice
    
    case $choice in
        1)
            read -p "NÃ¡zev session (default): " session_name
            tmux new-session -s "${session_name:-default}"
            ;;
        2)
            echo "PokraÄuji bez tmux..."
            ;;
        *)
            echo "NeplatnÃ¡ volba, pokraÄuji bez tmux..."
            ;;
    esac
fi
